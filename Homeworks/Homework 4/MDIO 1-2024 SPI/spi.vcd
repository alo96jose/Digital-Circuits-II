$date
	Mon Jun  3 12:26:05 2024
$end
$version
	Icarus Verilog
$end
$timescale
	1s
$end
$scope module spi_tb $end
$scope module CPU $end
$var wire 1 ! CKP $end
$var wire 1 " CLK $end
$var wire 1 # CPH $end
$var wire 1 $ RESET $end
$var wire 1 % SCK $end
$var wire 1 & START_STB $end
$var wire 16 ' transaccion [15:0] $end
$var wire 1 ( trans_finalizada $end
$var wire 1 ) clk_div4 $end
$var wire 1 * MISO $end
$var parameter 32 + DIV_FREQ $end
$var parameter 3 , ESCRITURA_LECTURA $end
$var parameter 3 - IDLE $end
$var reg 1 . CS $end
$var reg 1 / MOSI $end
$var reg 1 0 NXT_CS $end
$var reg 1 1 NXT_MOSI $end
$var reg 1 2 SCK_anterior $end
$var reg 1 3 clk_div2 $end
$var reg 2 4 count_clock [1:0] $end
$var reg 5 5 cuenta_bits [4:0] $end
$var reg 5 6 cuenta_bits_d [4:0] $end
$var reg 16 7 dato_enviado [15:0] $end
$var reg 16 8 dato_recibido [15:0] $end
$var reg 2 9 div_freq [1:0] $end
$var reg 3 : estado [2:0] $end
$var reg 5 ; prox_cuenta_bits [4:0] $end
$var reg 16 < prox_dato_enviado [15:0] $end
$var reg 16 = prox_dato_recibido [15:0] $end
$var reg 3 > prox_estado [2:0] $end
$upscope $end
$upscope $end
$scope module spi_tb $end
$scope module T1 $end
$var wire 1 ! CKP $end
$var wire 1 # CPH $end
$var wire 1 / MOSI $end
$var wire 1 $ RESET $end
$var wire 1 % SCK $end
$var wire 1 . SS $end
$var wire 1 ? negedge_SS $end
$var wire 1 @ trans_finalizada $end
$var parameter 3 A ESCRITURA_LECTURA $end
$var parameter 3 B IDLE $end
$var reg 1 * MISO $end
$var reg 1 C MOSI_d $end
$var reg 1 D SS_d $end
$var reg 5 E cuenta_bits [4:0] $end
$var reg 5 F cuenta_bits_d [4:0] $end
$var reg 16 G dato_enviado [15:0] $end
$var reg 16 H dato_recibido [15:0] $end
$var reg 3 I estado [2:0] $end
$var reg 5 J prox_cuenta_bits [4:0] $end
$var reg 16 K prox_dato_enviado [15:0] $end
$var reg 16 L prox_dato_recibido [15:0] $end
$var reg 3 M prox_estado [2:0] $end
$upscope $end
$upscope $end
$enddefinitions $end
$comment Show the parameter values. $end
$dumpall
b1 B
b10 A
b1 -
b10 ,
b10 +
$end
#0
$dumpvars
bx M
bx L
bx K
bx J
bx I
bx H
bx G
bx F
bx E
xD
xC
x@
x?
bx >
bx =
bx <
bx ;
bx :
bx 9
bx 8
bx 7
bx 6
bx 5
bx 4
x3
x2
x1
x0
x/
x.
x*
x)
x(
bx '
x&
x%
0$
z#
0"
z!
$end
#20
0)
b1 M
0?
b0 ;
01
10
b0 =
b1 >
b0 4
0%
03
0/
b0 7
b0 8
1.
02
b0 9
b1 :
1"
1$
#40
0"
#60
1"
#80
0"
#100
1"
#120
0"
#140
1"
#160
0"
#180
1"
#200
b0 ;
0"
b1100000101 '
0$
#220
b0 J
b0 5
b1 I
0C
1D
b1 4
1%
13
bx 7
b1 9
1"
#240
0"
#260
1)
b10 4
0%
03
12
b10 9
1"
#280
0"
0&
#300
0(
b0 E
b0 6
b11 4
1%
13
02
b11 9
1"
#320
0"
#340
0)
b0 4
0%
03
12
b0 9
1"
#360
b10 >
0"
1&
#380
b10 M
1?
0@
b0 7
0.
b0 F
bx000000000000000 =
b1 ;
00
b1 4
1%
13
02
b1 9
b10 :
1"
#400
b1 ;
bx000000000000000 =
0"
0&
#420
1)
b1 ;
b10 4
0%
03
bx 7
bx000000000000000 8
12
b10 9
1"
#440
0"
#460
0?
b0 L
b11000000001 K
b10 M
b10 ;
0D
b11000000001 G
b0 H
b1 5
b11 4
1%
13
02
b11 9
1"
#480
0"
#500
0)
b0 4
0%
03
12
b0 9
1"
#520
0"
#540
b11 ;
0*
b1 J
b1 6
b10 5
b10 I
b1 4
1%
13
02
b1 9
1"
#560
0"
#580
1)
b10 4
0%
03
12
b10 9
1"
#600
0"
#620
b10 J
b100 ;
b1 E
b10 6
b11 5
b11 4
1%
13
02
b11 9
1"
#640
0"
#660
0)
b0 4
0%
03
12
b0 9
1"
#680
0"
#700
b101 ;
b11 J
b11 6
b100 5
b1 F
b10 E
b1 4
1%
13
02
b1 9
1"
#720
0"
#740
1)
b10 4
0%
03
12
b10 9
1"
#760
0"
#780
b100 J
b110 ;
b10 F
b11 E
b100 6
b101 5
b11 4
1%
13
02
b11 9
1"
#800
0"
#820
0)
b0 4
0%
03
12
b0 9
1"
#840
0"
#860
11
b111 ;
b101 J
b101 6
b110 5
b11 F
b100 E
b1 4
1%
13
02
b1 9
1"
#880
0"
#900
1)
b111 ;
b100000000000 H
b10 4
0%
03
1/
12
b10 9
1"
#920
0"
#940
bx000001000000000 =
1*
b10000000000 L
b110 J
b1000 ;
1C
b100 F
b10000000000 H
b101 E
b110 6
b111 5
b11 4
1%
13
02
b11 9
1"
#960
0"
#980
0)
b1000 ;
b0 4
0%
03
bx000001000000000 8
12
b0 9
1"
#1000
0"
#1020
bx000001100000000 =
01
b1001 ;
b11000000000 H
b11000000000 L
b111 J
b111 6
b1000 5
b101 F
b110 E
b1 4
1%
13
02
b1 9
1"
#1040
0"
#1060
1)
b10000000000 H
b1001 ;
b10 4
0%
03
0/
bx000001100000000 8
12
b10 9
1"
#1080
0"
#1100
0*
b1000 J
bx000001100000000 =
b1010 ;
0C
b110 F
b11000000000 H
b111 E
b1000 6
b1001 5
b11 4
1%
13
02
b11 9
1"
#1120
0"
#1140
0)
b0 4
0%
03
12
b0 9
1"
#1160
0"
#1180
b1011 ;
b1001 J
b1001 6
b1010 5
b111 F
b1000 E
b1 4
1%
13
02
b1 9
1"
#1200
0"
#1220
1)
b10 4
0%
03
12
b10 9
1"
#1240
0"
#1260
b1010 J
b1100 ;
b1000 F
b1001 E
b1010 6
b1011 5
b11 4
1%
13
02
b11 9
1"
#1280
0"
#1300
0)
b0 4
0%
03
12
b0 9
1"
#1320
0"
#1340
b1101 ;
b1011 J
b1011 6
b1100 5
b1001 F
b1010 E
b1 4
1%
13
02
b1 9
1"
#1360
0"
#1380
1)
b10 4
0%
03
12
b10 9
1"
#1400
0"
#1420
b1100 J
11
b1110 ;
b1010 F
b1011 E
b1100 6
b1101 5
b11 4
1%
13
02
b11 9
1"
#1440
0"
#1460
0)
b1110 ;
b11000010000 H
b0 4
0%
03
1/
12
b0 9
1"
#1480
0"
#1500
01
b1111 ;
b11000001000 L
b1101 J
b1101 6
b1110 5
b1011 F
b11000001000 H
b1100 E
1C
b1 4
1%
13
02
b1 9
1"
#1520
0"
#1540
1)
b1111 ;
b11000000000 H
b10 4
0%
03
0/
12
b10 9
1"
#1560
0"
#1580
b1110 J
11
b10000 ;
0C
b1100 F
b11000001000 H
b1101 E
b1110 6
b1111 5
b11 4
1%
13
02
b11 9
1"
#1600
0"
#1620
0)
b10000 ;
b11000001100 H
b0 4
0%
03
1/
12
b0 9
1"
#1640
0"
#1660
b1 >
1(
x1
b10001 ;
b11000001010 L
b1111 J
b1111 6
b10000 5
b1101 F
b11000001010 H
b1110 E
1C
b1 4
1%
13
02
b1 9
1"
#1680
0"
#1700
1)
b110000010x0 H
01
10
b0 ;
b10 4
0%
03
x/
12
b10 9
b1 :
1"
#1720
0"
#1740
1*
b10000 J
0(
0C
1D
b1110 F
b1111 E
b10000 6
b0 5
b0 ;
b110000010x0 H
b110000010x0 L
b11 4
1%
13
0/
1.
02
b11 9
1"
#1760
0"
#1780
0)
b0 4
0%
03
12
b0 9
1"
#1800
0"
#1820
b1 M
1@
x*
b10001 J
b0 6
b1111 F
b10000 E
b1 4
1%
13
02
b1 9
1"
#1840
0"
#1860
1)
b10 4
0%
03
12
b10 9
1"
#1880
0"
#1900
0@
b0 J
b10000 F
b10001 E
b1 I
b11 4
1%
13
02
b11 9
1"
#1920
0"
#1940
0)
b0 4
0%
03
12
b0 9
1"
#1960
0"
#1980
b10001 F
b0 E
b1 4
1%
13
02
b1 9
1"
#2000
0"
#2020
1)
b10 4
0%
03
12
b10 9
1"
#2040
0"
#2060
b0 F
b11 4
1%
13
02
b11 9
1"
#2080
0"
#2100
0)
b0 4
0%
03
12
b0 9
1"
#2120
0"
#2140
b1 4
1%
13
02
b1 9
1"
#2160
0"
#2180
1)
b10 4
0%
03
12
b10 9
1"
#2200
0"
#2220
b11 4
1%
13
02
b11 9
1"
#2240
0"
#2260
0)
b0 4
0%
03
12
b0 9
1"
#2280
0"
#2300
b1 4
1%
13
02
b1 9
1"
#2320
0"
#2340
1)
b10 4
0%
03
12
b10 9
1"
#2360
0"
#2380
b11 4
1%
13
02
b11 9
1"
#2400
0"
#2420
0)
b0 4
0%
03
12
b0 9
1"
#2440
0"
#2460
b1 4
1%
13
02
b1 9
1"
#2480
0"
#2500
1)
b10 4
0%
03
12
b10 9
1"
#2520
0"
#2540
b11 4
1%
13
02
b11 9
1"
#2560
0"
#2580
0)
b0 4
0%
03
12
b0 9
1"
#2600
0"
#2620
b1 4
1%
13
02
b1 9
1"
#2640
0"
#2660
1)
b10 4
0%
03
12
b10 9
1"
#2680
0"
#2700
b11 4
1%
13
02
b11 9
1"
#2720
0"
#2740
0)
b0 4
0%
03
12
b0 9
1"
#2760
0"
#2780
b1 4
1%
13
02
b1 9
1"
#2800
0"
#2820
1)
b10 4
0%
03
12
b10 9
1"
#2840
0"
#2860
b11 4
1%
13
02
b11 9
1"
#2880
0"
#2900
0)
b0 4
0%
03
12
b0 9
1"
#2920
0"
#2940
b1 4
1%
13
02
b1 9
1"
#2960
0"
#2980
1)
b10 4
0%
03
12
b10 9
1"
#3000
0"
#3020
b11 4
1%
13
02
b11 9
1"
#3040
0"
#3060
0)
b0 4
0%
03
12
b0 9
1"
#3080
0"
#3100
b1 4
1%
13
02
b1 9
1"
#3120
0"
#3140
1)
b10 4
0%
03
12
b10 9
1"
#3160
0"
#3180
b11 4
1%
13
02
b11 9
1"
#3200
0"
#3220
0)
b0 4
0%
03
12
b0 9
1"
#3240
0"
#3260
b1 4
1%
13
02
b1 9
1"
#3280
0"
#3300
1)
b10 4
0%
03
12
b10 9
1"
#3320
0"
#3340
b11 4
1%
13
02
b11 9
1"
#3360
0"
#3380
0)
b0 4
0%
03
12
b0 9
1"
#3400
0"
#3420
b1 4
1%
13
02
b1 9
1"
#3440
0"
#3460
1)
b10 4
0%
03
12
b10 9
1"
#3480
0"
#3500
b11 4
1%
13
02
b11 9
1"
#3520
0"
#3540
0)
b0 4
0%
03
12
b0 9
1"
#3560
0"
#3580
b1 4
1%
13
02
b1 9
1"
#3600
0"
#3620
1)
b10 4
0%
03
12
b10 9
1"
#3640
0"
#3660
b11 4
1%
13
02
b11 9
1"
#3680
0"
#3700
0)
b0 4
0%
03
12
b0 9
1"
#3720
0"
#3740
b1 4
1%
13
02
b1 9
1"
#3760
0"
#3780
1)
b10 4
0%
03
12
b10 9
1"
#3800
0"
#3820
b11 4
1%
13
02
b11 9
1"
#3840
0"
#3860
0)
b0 4
0%
03
12
b0 9
1"
#3880
0"
#3900
b1 4
1%
13
02
b1 9
1"
#3920
0"
#3940
1)
b10 4
0%
03
12
b10 9
1"
#3960
0"
#3980
b11 4
1%
13
02
b11 9
1"
#4000
0"
#4020
0)
b0 4
0%
03
12
b0 9
1"
#4040
0"
#4060
b1 4
1%
13
02
b1 9
1"
#4080
0"
#4100
1)
b10 4
0%
03
12
b10 9
1"
#4120
0"
#4140
b11 4
1%
13
02
b11 9
1"
#4160
0"
#4180
0)
b0 4
0%
03
12
b0 9
1"
#4200
0"
#4220
b1 4
1%
13
02
b1 9
1"
#4240
0"
#4260
1)
b10 4
0%
03
12
b10 9
1"
#4280
0"
#4300
b11 4
1%
13
02
b11 9
1"
#4320
0"
#4340
0)
b0 4
0%
03
12
b0 9
1"
#4360
0"
#4380
b1 4
1%
13
02
b1 9
1"
#4400
0"
#4420
1)
b10 4
0%
03
12
b10 9
1"
#4440
0"
#4460
b11 4
1%
13
02
b11 9
1"
#4480
0"
#4500
0)
b0 4
0%
03
12
b0 9
1"
#4520
0"
#4540
b1 4
1%
13
02
b1 9
1"
#4560
0"
#4580
1)
b10 4
0%
03
12
b10 9
1"
#4600
0"
#4620
b11 4
1%
13
02
b11 9
1"
#4640
0"
#4660
0)
b0 4
0%
03
12
b0 9
1"
#4680
0"
#4700
b1 4
1%
13
02
b1 9
1"
#4720
0"
#4740
1)
b10 4
0%
03
12
b10 9
1"
#4760
0"
#4780
b11 4
1%
13
02
b11 9
1"
#4800
0"
#4820
0)
b0 4
0%
03
12
b0 9
1"
#4840
0"
#4860
b1 4
1%
13
02
b1 9
1"
#4880
0"
#4900
1)
b10 4
0%
03
12
b10 9
1"
#4920
0"
#4940
b11 4
1%
13
02
b11 9
1"
#4960
0"
#4980
0)
b0 4
0%
03
12
b0 9
1"
#5000
0"
#5020
b1 4
1%
13
02
b1 9
1"
#5040
0"
#5060
1)
b10 4
0%
03
12
b10 9
1"
#5080
0"
#5100
b11 4
1%
13
02
b11 9
1"
#5120
0"
#5140
0)
b0 4
0%
03
12
b0 9
1"
#5160
0"
#5180
b1 4
1%
13
02
b1 9
1"
#5200
0"
#5220
1)
b10 4
0%
03
12
b10 9
1"
#5240
0"
#5260
b11 4
1%
13
02
b11 9
1"
#5280
0"
#5300
0)
b0 4
0%
03
12
b0 9
1"
#5320
0"
#5340
b1 4
1%
13
02
b1 9
1"
#5360
0"
#5380
1)
b10 4
0%
03
12
b10 9
1"
#5400
0"
#5420
b11 4
1%
13
02
b11 9
1"
#5440
0"
#5460
0)
b0 4
0%
03
12
b0 9
1"
#5480
0"
#5500
b1 4
1%
13
02
b1 9
1"
#5520
0"
#5540
1)
b10 4
0%
03
12
b10 9
1"
#5560
0"
#5580
b11 4
1%
13
02
b11 9
1"
#5600
0"
#5620
0)
b0 4
0%
03
12
b0 9
1"
#5640
0"
#5660
b1 4
1%
13
02
b1 9
1"
#5680
0"
#5700
1)
b10 4
0%
03
12
b10 9
1"
#5720
0"
#5740
b11 4
1%
13
02
b11 9
1"
#5760
0"
#5780
0)
b0 4
0%
03
12
b0 9
1"
#5800
0"
#5820
b1 4
1%
13
02
b1 9
1"
#5840
0"
#5860
1)
b10 4
0%
03
12
b10 9
1"
#5880
0"
#5900
b11 4
1%
13
02
b11 9
1"
#5920
0"
#5940
0)
b0 4
0%
03
12
b0 9
1"
#5960
0"
#5980
b1 4
1%
13
02
b1 9
1"
#6000
0"
#6020
1)
b10 4
0%
03
12
b10 9
1"
#6040
0"
#6060
b11 4
1%
13
02
b11 9
1"
#6080
0"
#6100
0)
b0 4
0%
03
12
b0 9
1"
#6120
0"
#6140
b1 4
1%
13
02
b1 9
1"
#6160
0"
#6180
1)
b10 4
0%
03
12
b10 9
1"
#6200
0"
#6220
b11 4
1%
13
02
b11 9
1"
#6240
0"
#6260
0)
b0 4
0%
03
12
b0 9
1"
#6280
0"
#6300
b1 4
1%
13
02
b1 9
1"
#6320
0"
#6340
1)
b10 4
0%
03
12
b10 9
1"
#6360
0"
#6380
b11 4
1%
13
02
b11 9
1"
#6400
0"
#6420
0)
b0 4
0%
03
12
b0 9
1"
#6440
0"
#6460
b1 4
1%
13
02
b1 9
1"
#6480
0"
#6500
1)
b10 4
0%
03
12
b10 9
1"
#6520
0"
#6540
b11 4
1%
13
02
b11 9
1"
#6560
0"
#6580
0)
b0 4
0%
03
12
b0 9
1"
#6600
0"
#6620
b1 4
1%
13
02
b1 9
1"
#6640
0"
#6660
1)
b10 4
0%
03
12
b10 9
1"
#6680
0"
#6700
b11 4
1%
13
02
b11 9
1"
#6720
0"
#6740
0)
b0 4
0%
03
12
b0 9
1"
#6760
0"
#6780
b1 4
1%
13
02
b1 9
1"
#6800
0"
#6820
1)
b10 4
0%
03
12
b10 9
1"
#6840
0"
#6860
b11 4
1%
13
02
b11 9
1"
#6880
0"
#6900
0)
b0 4
0%
03
12
b0 9
1"
#6920
0"
#6940
b1 4
1%
13
02
b1 9
1"
#6960
0"
#6980
1)
b10 4
0%
03
12
b10 9
1"
#7000
0"
#7020
b11 4
1%
13
02
b11 9
1"
#7040
0"
#7060
0)
b0 4
0%
03
12
b0 9
1"
#7080
0"
#7100
b1 4
1%
13
02
b1 9
1"
#7120
0"
#7140
1)
b10 4
0%
03
12
b10 9
1"
#7160
0"
#7180
b11 4
1%
13
02
b11 9
1"
#7200
0"
#7220
0)
b0 4
0%
03
12
b0 9
1"
#7240
0"
#7260
b1 4
1%
13
02
b1 9
1"
#7280
0"
#7300
1)
b10 4
0%
03
12
b10 9
1"
#7320
0"
#7340
b11 4
1%
13
02
b11 9
1"
#7360
0"
#7380
0)
b0 4
0%
03
12
b0 9
1"
#7400
0"
#7420
b1 4
1%
13
02
b1 9
1"
#7440
0"
#7460
1)
b10 4
0%
03
12
b10 9
1"
#7480
0"
#7500
b11 4
1%
13
02
b11 9
1"
#7520
0"
#7540
0)
b0 4
0%
03
12
b0 9
1"
#7560
0"
#7580
b1 4
1%
13
02
b1 9
1"
#7600
0"
#7620
1)
b10 4
0%
03
12
b10 9
1"
#7640
0"
#7660
b11 4
1%
13
02
b11 9
1"
#7680
0"
#7700
0)
b0 4
0%
03
12
b0 9
1"
#7720
0"
#7740
b1 4
1%
13
02
b1 9
1"
#7760
0"
#7780
1)
b10 4
0%
03
12
b10 9
1"
#7800
0"
#7820
b11 4
1%
13
02
b11 9
1"
#7840
0"
#7860
0)
b0 4
0%
03
12
b0 9
1"
#7880
0"
#7900
b1 4
1%
13
02
b1 9
1"
#7920
0"
#7940
1)
b10 4
0%
03
12
b10 9
1"
#7960
0"
#7980
b11 4
1%
13
02
b11 9
1"
#8000
0"
#8020
0)
b0 4
0%
03
12
b0 9
1"
#8040
0"
#8060
b1 4
1%
13
02
b1 9
1"
#8080
0"
#8100
1)
b10 4
0%
03
12
b10 9
1"
#8120
0"
#8140
b11 4
1%
13
02
b11 9
1"
#8160
0"
#8180
0)
b0 4
0%
03
12
b0 9
1"
#8200
0"
#8220
b1 4
1%
13
02
b1 9
1"
#8240
0"
#8260
1)
b10 4
0%
03
12
b10 9
1"
#8280
0"
#8300
b11 4
1%
13
02
b11 9
1"
#8320
0"
#8340
0)
b0 4
0%
03
12
b0 9
1"
#8360
0"
#8380
b1 4
1%
13
02
b1 9
1"
#8400
0"
